/* *************************************************************************/

/* MOBILE + TABLET STYLES (SMALL AND MEDIUM) */

/* *************************************************************************/

@media only screen and (max-width: 1024px) {
	.row .row {
		// not sure why we need to override this, however apparently we have
		// a rule on desktop that goes .row .row margin: 0 .9375em; which is
		// really weird. I'm sure there's a reason for it, but I don't know
		// it, so I will leave it in for now.	This rule shouldn't break
		// anything, but it may, so if we see wonky margins on rows in mobile
		// this is why. -sjc 2015 03 10.
		margin-left: auto;
		margin-right: auto;
	}
	.bcrumbs {
		padding-left: 15px;
		margin-bottom: 0;
	}
	.shareBtn {
		margin-top: 0;
	}
	.shareComponent {
		float: right;
		width: initial;
	}
	.section-head {
		float: none;
		width: 100%;
	}
	figure.image-left-medium {
		width: 100%
	}
	.feature-primary {
		.card {
			background: white;
		}
		a {
			color: $body-font-color;
		}
		h3 {
			color: #076f88;
		}
	}
	/* hide the TOC on small/medium screens. The accordion serves the same purpose */
	.toc-container {
		display: none;
	}
	.back-to-top {
		display: none !important;
	}
	/*** BEGIN Megamenus/Search Styles ***/
	#content {
		padding-top: 0;
	}
	#page, #mega-nav {
		position: relative;
		left: 0;
		@include transition(left 500ms ease);
	}
	html.nav-open #page {
		left: 80%;
	}
	.fixedtotop {
		@include transition(left 500ms ease);
	}

	/* When the panel is closed, transition the page back to the left */
	/* hide search on mobile */
	.search {
		display: none;
	}

	#nvcgSlMainNav {
		.mobile-menu-bar {
			left: 0px;
			position: relative;
		}
	}
	#nvcgSlMainNav.searching {
		// This .searching class is applied with javascript
		// by NCI.Search.mobile.search(); in nci-utils.js

		// We want to control as much as we can with CSS
		// instead of relying on JavaScript. The reasons
		// for this are many.

		// We set 'pos:rel' here so that we have a baseline
		// for the rest of the absolute positioning we're
		// about to do.
		position: relative;

		.mobile-menu-bar {
			left: -100%; // Get that thing outta here!
			height: 100%; // We still need the height for the menu button we're about to borrow.

			.menu-btn {
				position: absolute;
				left: 100%; // Get back here!
				background-position: 80% 50%; // move icon into place
				width: 71px;
				color: transparent; // get rid of the text
				z-index: 90; // needs to be above search

				&:before {
					/* The arrow in the back to menu button */
					content: " "; // we're adding image content
					position: absolute;
					left: 25%;
					display: block;
					top: calc(50% - 9px); // a good way to position, uses 1/2 the height.
					background: url($icons + "nci-sprite.png") no-repeat -349px -178px;
					width: 11px;
					height: 18px; //adjust 'top' calc() value if your change this.
					// This really should be a mixin:
					@include transform(rotate(180deg));
				}
			}
		}

		.search {
			/* we use the main search...it's just easier */
			display: block;
			width: 100%;
			position: absolute;
			right: 0px;
			top: 0px;
			height: 100%;
		}

		// These are all ID selectors, so we really don't
		// need to do any more nesting. All we're trying
		// to catch is the .searching that we're applying
		// with javascript on the parent.
		#siteSearchForm {
			background-color: #444;

			&:before {
				content: "";
				display: block;
				width: calc(100% - #{$siteSearchFormPadding});
				height: 10px;
				border: 2px solid $teal;
				border-top: none;
				background-color: transparent;
				left: 90px;
				position: absolute;
				bottom: 10px;
			}
		}

		#swKeyword {
			height: 100%;
			width: 100%;
			margin: 0;
			// We need the padding on this to match the padding set on the siteSearchForm
			// that accounts for the back to menu button. Since this is in em and will thusly
			// change based on font size, we also needed to capture the font-size in a var
			padding: 10px ($siteSearchFormPadding / $swKeywordFontSize + 0em) 0px;
			font-size: $swKeywordFontSize;
			z-index: 80; //needs to be below the menu-btn
			background-color: #444;

			@include placeholder {
				color: #888;
				height: 100%;
				position: relative;
				display: block;
			}
		}

		#sitesearch { // the search submit button
			// to be honest, it seems like bad usability...
			display: none;
		}

		#searchclear {
			position: absolute;
			right: 0px;
			bottom: 0px;
			background-color: transparent;
			height: 48px;
			width: 48px;
			top: 6px;
			border: none;
			@include box-shadow(none);

			&:before {
				content: "+";
				@include font-noto;
				font-size: 48px;
				font-weight: normal;
				color: #888;
				display: block;
				position: absolute;
				height: 48px;
				width: 48px;
				top: 0px;
				left: 0px;
				@include transform(rotate(45deg));
			}
		}
	}

	/* Move nav off screen, setup transitions */
	#mega-nav {
		// Menu Colors:
		$white: #ffffff;
		$beige: #f3f3f2;
		$taupe: #c3c1b4;
		$teal:	#0498a1;
		$dteal: #017c84;

		visibility: hidden;
		z-index: 1000;
		position: fixed;
		left: -80%;
		top: 0;
		width: 80%;
		height: 100%;
		background-color: $beige;
		@include box-shadow(-15px 0px 15px -15px rgba(0, 0, 0, 0.6) inset);

		html.nav-open & {
			visibility: visible;
			left: 0.01%;
		}
		html.nav-moving & {
			visibility: visible;
		}


		> ul > li:first-child {
			display: inherit;
		}

		/* Display nav items vertically */
		ul.menu {
			border-top: 1px solid #888;
			overflow-y: auto;
			height: 100%;
		}
		li {
			width: 100%;
			box-sizing: border-box;
			border-top: 1px solid #888;
			font-weight: normal;
			background-color: $beige;

			> div {
				position: relative;
			}

			a {
				display: inline-block;
				width: 100%;
				min-height: 50px;
				padding-right: 70px;
				color: $header-font-color;
			}
		}


		/* clicked link state */
		.nav-menu li > div > a:active {
			color: $white;
		}

		/* remove margin from lists */
		ul {
			margin: 0;
			width: 100%;
		}

		/* Level Styles */
		.lvl-1, .lvl-2, .lvl-3 {
			a {
				font-family: 'Montserrat', Arial;
			}
		}
			/* list item spacing through the hierarchy */
		.lvl-1 { // level 0 in the mocks
			display: block;
			text-transform: uppercase;

			a {
				font-size: 1.2em;
				padding-left: 17px;
				padding-top: 10px;
				padding-bottom: 10px;
			}

			.toggle {
			}
		}
		.lvl-2 { // level 1 in the mocks
			display: none;
			text-transform: uppercase;

			a {
				font-size: 1.05em;
				padding-left: 31px;
				padding-top: 11.5px;
				padding-bottom: 11.5px;
			}

			.toggle {
			}
		}
		.lvl-3 { // level 2 in the mocks
			display: none;
			// text-transform: none;

			a {
				font-size: 0.84em;
				padding-left: 44px;
				padding-top: 15px;
				padding-bottom: 15px;
			}

			.toggle {
			}
		}

		.contains-current {
			font-weight: bold;
			display: block;

			> .mobile-item > li {
				display: block;
			}
		}
		.current-page {
			display: block;
			background-color: $teal;
			color: $white;
			font-weight: bold;

			> div > a {
				color: $white;
			}
		}
		.lvl-1.contains-current .lvl-2,
		.lvl-2.contains-current .lvl-3,
		.lvl-1.current-page .lvl-2,
		.lvl-2.current-page .lvl-3 {
			 display: block;
		}
		.nav-item-title {
			position: relative;
		}
	}
	.sub-nav-mega {
		display: none;
	}
	.hidden-sibling {
		display: none;
	}
	.hidden {
		position: absolute;
		left: -10000px;
		top: auto;
		width: 1px;
		height: 1px;
		overflow: hidden;
	}
	/*** END Megamenus/Search Styles ***/
	/*** BEGIN mobile section nav ("tongue") styles ***/
	/* fix the margin (on mobile) for pages with a section nav */
	.has-section-nav {
		margin-top: 1.5em;
	}
	/* container width */
	.main-content .general-page-body-container .local-navigation {
		padding-left: 5%;
		padding-right: 5%;
	}
	.section-nav {
		display: none;
		position: absolute;
		top: 1.9375em;
		z-index: 999;
		width: 90%;
		background: white;
	}
	.section-nav,
	.section-nav ul,
	.section-nav ul li {
		margin: 0;
	}
	.section-nav div {
		position: relative;
		font-size: 0.875em;
		line-height: 1.2;
		padding-top: 14.5px;
		padding-bottom: 14.5px;
	}
	.section-nav .contains-current > div {
		font-weight: bold;
	}
	.section-nav div > a {
		display: inline-block;
	}
	.section-nav ul li {
		border-top: 1px solid #d5d5d2;
	}
	.section-nav ul > li:first-child {
		border: none;
	}
	/* these will not apply to the top-level item (currently in blue) */
	.section-nav ul div > a {
		margin-right: 3.8125em;
		color: $header-font-color;
		line-height: 1.5;
		vertical-align: middle;
	}
	.section-nav div.current-page > a {
		color: white;
		font-weight: bold;
	}

	/** BEGIN level-by-level styling **/
	/* level 0 */
	.section-nav .level-0 > div {
		font-size: 1.125em;
		font-weight: bold;
		padding-top: 0.625em;
		padding-bottom: 0.625em;
		background-color: #186d89;
		> a {
			color: #FFFFFF;
			margin-left: 0.8888em;
			margin-right: 3.3888em;
			text-transform: uppercase;
		}
	}

	/* level 1 */
	.section-nav .level-1 > div > a {
		text-transform: none;
		margin-left: 1em;
	}
	.section-nav .level-1.contains-current {
		background-color: #eeedf4;
	}

	/* level 2 */
	.section-nav .level-2 > div > a {
		margin-left: 1.875em;
	}
	.section-nav .level-2 > ul {
		z-index: 1;
		position: absolute;
		background: #c7c7d3;
	}

	/* level 3 */
	.section-nav .level-3 > div > a {
		margin-left: 2.3em;
		margin-right: 2.0833em;
		font-size: 0.9em;
	}
	/** END level-by-level styling **/

	/* this rule to be below the level-by-level styles */
	.section-nav div.current-page {
		background: #009b9d;
	}
	/* style section menu clicker on mobile */
	#section-menu-button {
		position: absolute;
		z-index: 999;
		cursor: pointer;
		text-align: right;
		color: #fff;
		font-size: 0.625em;
		line-height: 1.6;
		min-height: 1.5em;
		padding: 0.75em 2.5em 0.75em 0.75em;
		right: 5%;
		background: #186d89 95% 50% no-repeat;
		background-image: url($buttons + "section-menu-down-arrow.png");
		@include font-montserrat;
		text-transform: uppercase;
	}
	#section-menu-button.open {
		background-image: url($buttons + "section-menu-up-arrow.png");
	}
	/* Fallbacks */
	.no-js .section-nav ul {
		display: none;
	}
	.no-js .section-nav:hover ul, .no-js .section-nav:focus ul {
		display: block;
	}
	/* section nav grey page overlay - http://css-tricks.com/snippets/jquery/append-site-overlay-div/ */
	#overlay {
		opacity: 0.4;
		position: absolute;
		top: 0;
		left: 0;
		height: 100%;
		background-color: black;
		width: 100%;
		z-index: 998;
	}

	/* begin carousel styles */
	@import "_carousel-mediumdown";
	/* end carousel styles */

	.contentzone .document-dates,
	.contentzone .document-dates.horizontal {
		ul > li {
			display: block;
			&:before {
				content: none;
				display: none;
			}
		}
	}

	.public-use{
		font-size: 0.875em;
	}

	.syndication{
		font-size: 0.875em;
	}

	.footer-utility .columns {
		width: 100%;
	}
	.agencies ul {
		text-align: left;
	}
	.agencies ul li {
		display: block;
		background: none;
		padding-right: 0;
		margin-right: 0;
	}
	.hero-text {
		position: absolute;
		bottom: 0;
		color: white;
		background-color: rgba(10, 21, 28, 0.8);
		font-size: 1.2em;
		font-weight: bold;
		width: 100%;
		padding: 0 0.8em;
		left: 0;
		top: auto;
	}
	.hero-text p {
		line-height: 1;
		margin: 0.2em;
	}
	.feature-zone-image img {
		display: block;
		margin: 0 auto;
	}
	.featured-zone {
		margin-right: 0;
	}
	.home-director-stories,
	.infographic {
		background: none
	}
	.key-facts,
	.key-points {
		width: 100%;
		margin-left: 0;
		margin-right: 0;
		float: none;
	}
	/* since these items are still in columns at tablet, this reverses previous move for these classes */
	.feature-primary h3,
	.feature-primary p,
	.feature-secondary h3,
	.feature-secondary p,
	.other-sites-carousel h3,
	.contentzone .page-options {
		padding-left: 0;
	}
	/* Multimedia row does need padding in tablet */
	.multimedia h3,
		.multimedia p {
			 padding-left: 15px;
	}
	/*** BEGIN PDQ Styles ***/
	.toptoc {
		display: none;
	}
	div#_toc_article {
		display: none;
	}
	section.hide {
		display: block;
	}
	/*** END PDQ Styles ***/
}
