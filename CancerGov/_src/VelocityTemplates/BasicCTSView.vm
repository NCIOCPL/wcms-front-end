<script src="/PublishedContent/js/BasicCTSViewPage.js" type="text/javascript"></script>

## Draws a Single Location Item

#macro(DrawLocation $loc)
<div itemprop="location" itemscope="" itemtype="http://schema.org/Place">
  <strong itemprop="name">$loc.FacilityName</strong>
  <br>
    <span itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress">
      <meta itemprop="addressCountry" content="$loc.PostalAddress.CountryName" />
      <span itemprop="addressLocality">$loc.PostalAddress.City</span>##
#if (!$Tools.IsNullOrWhitespace($loc.PostalAddress.PoliticalSubUnitName))##
, <span itemprop="addressRegion">$loc.PostalAddress.PoliticalSubUnitName</span>
      #end
    </span>
    <br>

      #if ($loc.HasContact)
      Contact:
      #if (!$Tools.IsNullOrWhitespace($loc.CTGovContact.SurName))
      $loc.CTGovContact.SurName
      #else
      Name Not Available
      #end
      <br>
        #if (!$Tools.IsNullOrWhitespace($loc.CTGovContact.Phone))
        Phone: $loc.CTGovContact.Phone
        #end

        #if (!$Tools.IsNullOrWhitespace($loc.CTGovContact.Email))
        Email: $loc.CTGovContact.Email
        #end
        #end
        <br>
          <br>
	</div>
#end

#macro(DrawLocations)
#if($SearchResults.Control.GetShowAll() > 0)
#DrawAllLocations()
#elseif($SearchResults.Control.HasZip())
#DrawProximityLocations()
#else
#DrawFilterableLocations()
#end
#end

#macro(DrawNoLocations)
#if($SearchResults.Trial.CurrentProtocolStatus == "Not yet active")
Location information is not yet available.
#else
See trial information on <a href="https://www.clinicaltrials.gov/show/$SearchResults.Trial.NCTID">ClinicalTrials.gov</a> for a list of participating sites.
#end
#end

## This is used to draw all study sites with filters.
#macro(DrawFilterableLocations)
<div id="filterable-trialslist">
  #if ($SearchResults.Trial.GetAllSortedLocations().USA.Count == 0 && $SearchResults.Trial.GetAllSortedLocations().Canada.Count == 0 && $SearchResults.Trial.GetAllSortedLocations().Other.Count == 0)
  #DrawNoLocations()##
  #else
  #if ($SearchResults.Trial.GetAllSortedLocations().USA.Count > 0)
  <div data-basiccts-countrygroup="U.S.A.">
    #foreach($state in $SearchResults.Trial.GetAllSortedLocations().USA)
    #each
    <div data-basiccts-psunitgroup="$state.key">
      <h3>$state.key</h3>
      #foreach($loc in $state.Value)
      #each
      #DrawLocation($loc)
      #end
    </div>
    #end
  </div>
  #end
  #if ($SearchResults.Trial.GetAllSortedLocations().Canada.Count > 0)
  <div data-basiccts-countrygroup="Canada">
    #foreach($state in $SearchResults.Trial.GetAllSortedLocations().Canada)
    #each
    <div data-basiccts-psunitgroup="$state.key">
      <h3>$state.key</h3>
      #foreach($loc in $state.Value)
      #each
      #DrawLocation($loc)
      #end
    </div>
    #end
  </div>
  #end
  #if ($SearchResults.Trial.GetAllSortedLocations().Other.Count > 0)
  <div data-basiccts-countrygroup="Other">
    #foreach($country in $SearchResults.Trial.GetAllSortedLocations().Other)
    #each
    <div data-basiccts-psunitgroup="$country.key">
      <h3>$country.key</h3>
      #foreach($loc in $country.value)
      #each
      #DrawLocation($loc)
      #end
    </div>
    #end
  </div>
  #end
  #end
</div>
#end

## This is used to draw the closest sites when viewing by proximity
#macro(DrawProximityLocations)
<div id="proximity-trialslist">
  #if($SearchResults.Trial.GetLocationsNearZip($SearchResults.Control.ZipLookup.GeoCode,$SearchResults.Control.ZipRadius).Length == 0)
  #DrawNoLocations()##
  #else

  <span class="right">
    <a id="location-link" href="$SearchResults.Control.PageInstruction.GetUrl("ShowAllUrl")#ui-id-6">Show all locations</a>
  </span>
  Locations within $SearchResults.Control.ZipRadius miles of ZIP code "$SearchResults.Control.ZipLookup.PostalCode_ZIP"
  <br />
  <br />
    #foreach($loc in $SearchResults.Trial.GetLocationsNearZip($SearchResults.Control.ZipLookup.GeoCode,$SearchResults.Control.ZipRadius))
    #each
      #DrawLocation($loc)
    #end
    #end
</div>
#end

## This is used to draw the closest sites when viewing by proximity
#macro(DrawAllLocations)
<div id="proximity-trialslist">
  #if ($SearchResults.Trial.GetAllSortedLocations().USA.Count == 0 && $SearchResults.Trial.GetAllSortedLocations().Canada.Count == 0 && $SearchResults.Trial.GetAllSortedLocations().Other.Count == 0)
  #DrawNoLocations()##
  #else
  <span class="right">
    <a id="location-link" href="$SearchResults.Control.PageInstruction.GetUrl("ShowNearbyUrl")#ui-id-6">Show locations near me</a>
  </span>
  #if ($SearchResults.Trial.GetAllSortedLocations().USA.Count > 0)
  <div data-basiccts-countrygroup="U.S.A.">
    #foreach($state in $SearchResults.Trial.GetAllSortedLocations().USA)
    #each
    <div data-basiccts-psunitgroup="$state.key">
      <h3>$state.key</h3>
      #foreach($loc in $state.Value)
      #each
      #DrawLocation($loc)
      #end
    </div>
    #end
  </div>
  #end
  #if ($SearchResults.Trial.GetAllSortedLocations().Canada.Count > 0)
  <div data-basiccts-countrygroup="Canada">
    #foreach($state in $SearchResults.Trial.GetAllSortedLocations().Canada)
    #each
    <div data-basiccts-psunitgroup="$state.key">
      <h3>$state.key</h3>
      #foreach($loc in $state.Value)
      #each
      #DrawLocation($loc)
      #end
    </div>
    #end
  </div>
  #end
  #if ($SearchResults.Trial.GetAllSortedLocations().Other.Count > 0)
  <div data-basiccts-countrygroup="Other">
    #foreach($country in $SearchResults.Trial.GetAllSortedLocations().Other)
    #each
    <div data-basiccts-psunitgroup="$country.key">
      <h3>$country.key</h3>
      #foreach($loc in $country.value)
      #each
      #DrawLocation($loc)
      #end
    </div>
    #end
  </div>
  #end
  #end
</div>
#end

<div class="large-9 columns">
  <div class="status">
    Status: $SearchResults.Trial.CurrentProtocolStatus
  </div>
  <div class="accordion desktop">
    <section>
      <h2>Description</h2>
      <div>
        $SearchResults.Trial.BriefSummary
      </div>
    </section>
    <section>
      <h2>Eligibility Criteria</h2>
      <div>
        $SearchResults.Trial.CTEntryCriteria
      </div>
    </section>
    <section>
      <h2>Locations & Contacts</h2>
      #DrawLocations()
    </section>

    <section>
      <h2>Trial Objectives and Outline</h2>
      <div>
        $SearchResults.Trial.DetailedDescription
      </div>
    </section>
    <section>
      <h2>Trial Phase & Type</h2>
      <div>
        <div class="row">
          <div class="medium-6 columns">
            <strong>Trial Phase</strong>
          </div>
          <div class="medium-6 columns">
            <strong>Trial Type</strong>
          </div>
        </div>
        <div class="row">
          <div class="medium-6 columns">
            $SearchResults.GlossifiedPhase
          </div>
          <div class="medium-6 columns">
            $SearchResults.Trial.JoinedTrialTypes
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2>Lead Organization</h2>
      <div>
        <strong>Lead Sponsor</strong>
        <br>
          $SearchResults.Trial.LeadSponsor<br>
            <br>
              #if($SearchResults.Trial.Collaborators.Count > 0)
              #if($SearchResults.Trial.Collaborators.Count > 1)
              Collaborators<br>
                #else
                Collaborator<br>
                  #end
                  #foreach($collab in $SearchResults.Trial.Collaborators)
                  #each
                  $collab<br>
                    #end
                    #end
                    <br>
                      #if($SearchResults.Trial.OverallOfficials.Count > 0)
                      #if($SearchResults.Trial.OverallOfficials.Count > 1)
                      Principal Investigators<br>
                        #else
                        Principal Investigator<br>
                          #end
                          #foreach($official in $SearchResults.Trial.OverallOfficials)
                          #each
                          $official.SurName<br>
         #end
        #end
			</div>
    </section>

    <section>
      <h2>Trial IDs</h2>
      <div>
        <strong>Primary ID</strong> $SearchResults.Trial.OrgStudyID <br>
          <strong>Secondary IDs</strong> $SearchResults.Trial.SecondaryIDList <br>
            <strong>Clinicaltrials.gov ID</strong> $SearchResults.Trial.NCTID <br>

			</div>
    </section>
  </div>
</div>

<div class="delighter-rail large-3 columns">
  <div class="delighter cts-livehelp">
    <h4>Have a question?</h4>
    <p>We're here to help</p>
    <hr/>
    <p>
      <a href='/contact'>
        Chat with us: <span class="live-help-button">
          <img alt="LiveHelp" src="/publishedcontent/images/images/spacer.gif">
        </span>
      </a>
    </p>
    <p>
      <a href="tel:1-800-422-2637">
        Call us: <span>1-800-4-CANCER</span>
      </a>
    </p>
    <p>
      <a href="tel:1-800-422-2637">
        <span>(1-800-422-6237)</span>
      </a>
    </p>
  </div>
  <a href="/about-cancer/treatment/clinical-trials/search/trial-guide">
    <div class="delighter cts-next-step">
      <h4>I’ve found a trial—what’s my next step?</h4>
      <hr/>
      <p>Refer to our guide on how to join a treatment trial.</p>
    </div>
  </a>
</div>

<div class="row">
  <div class="large-9 columns">
    #set($emailUrl = $SearchResults.Control.PageInstruction.GetUrl("email"))##
    #set($emailOnClick = "NCIAnalytics.eMailLink(this); dynPopWindow(&#39;${emailUrl}&#39;, &#39;emailPopUp&#39;, &#39;height=525,width=492&#39;); return false;")##
    <div class="page-options no-resize cts-share">
      <span class="share-text">Share this clinical trial with your doctor:</span>
      <span class="po-print">
        <a title="Print" onclick="NCIAnalytics.PrintLink(this);" href="#">
          <span class="icon icon-print"></span>
          <span class="text">Print</span>
        </a>
      </span>
      <span class="po-email">
        <a title="Email" href="$emailUrl" onclick="$emailOnClick">
          <span class="icon icon-email"></span>
          <span class="text">Email</span>
        </a>
      </span>
  </div>
	</div>
</div>